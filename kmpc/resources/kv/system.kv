#:kivy 1.10.0
#:import OutlineLabel kmpc.widgets.OutlineLabel
#:import SystemTabbedPanelItem kmpc.systempanel.SystemTabbedPanelItem

<SyncPopup@Popup>:
    auto_dismiss: True
    title: 'Sync'
    size_hint_x: 0.6
    size_hint_y: 0.8
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.33
            Button:
                text: 'Fanart'
                on_press: app.root.ids.system_tab.sync_fanart()
            Button:
                text: 'Music'
                on_press: app.root.ids.system_tab.sync_music()
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.33
            Button:
                text: 'Export Ratings'
                on_press: app.root.ids.system_tab.sync_export_ratings()
            Button:
                text: 'Import Ratings'
                on_press: app.root.ids.system_tab.sync_import_ratings()
        Button:
            size_hint_y: 0.33
            text: 'All'
            on_press: app.root.ids.system_tab.sync_all()

<StdoutPopup@Popup>:
    auto_dismiss: False
    title: 'Sync Output'
    ScrollView:
        id: sv
        GridLayout:
            id: layout
            cols: 1
            spacing: 1
            padding: 1
            size_hint_y: None

<SyncWarningPopup@Popup>:
    title: "Warning"
    size_hint_x: 0.6
    size_hint_y: 0.3
    size_hint_min_y: l.height
    OutlineLabel:
        id: l
        text: "Your mpdhost and synchost config fields are identical, sync is disabled to prevent data corruption."
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        valign: 'middle'

<SystemTabbedPanelItem>:
    config: app.config
    text: 'System'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.5
            Button:
                text: 'Update'
                on_press: root.update()
            Button:
                text: 'Sync'
                on_press: root.sync_popup()
            Button:
                text: 'Exit'
                on_press: app.stop()
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.5
            Button:
                text: 'Reboot'
                on_press: root.do_reboot()
            Button:
                text: 'Poweroff'
                on_press: root.do_poweroff()

